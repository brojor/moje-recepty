(function(e){function t(t){for(var s,o,i=t[0],c=t[1],l=t[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},n={app:0},r=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("85ec"),n=a.n(s);n.a},"0b86":function(e,t,a){e.exports=a.p+"img/camera.e2033de4.svg"},1:function(e,t){},"36be":function(e,t,a){e.exports=a.p+"img/menu.b72c8e2d.svg"},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id="4678"},"48b2":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=(a("7d9d"),a("c1df")),r=a.n(n),o=(a("3c0d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e._m(0),a("router-view",{staticClass:"container pt-2"})],1)}),i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light shadow-sm"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#/"}},[e._v("MojeRecepty.cz")])])}],c=(a("034f"),a("2877")),l={},u=Object(c["a"])(l,o,i,!1,null,null,null),m=u.exports,d=a("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("h1",[e._v("Registrace")]),a("form",{on:{submit:function(t){return t.preventDefault(),e.SignUp(t)}}},[e.errorMessage?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e(),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[e._v("Uživatelské jméno")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"tet",id:"username","aria-describedby":"usernameHelp",placeholder:"Zadejte uživatelské jméno",required:""},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[e._v("Uživatelské jméno musí být delší než 3 znaky")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[e._v("Heslo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Zadejte heslo",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Potvrdit")])])])},f=[],v=(a("caad"),a("4d63"),a("ac1f"),a("25f0"),a("2532"),a("d370")),h=a.n(v),b=(a("99af"),a("bc3a")),g=a.n(b),j="https://moje-recepty-online.herokuapp.com",C=g.a.create({baseURL:j,withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"}}),_={getRecipes:function(e){var t={Authorization:"Bearer ".concat(e)};return C.get("/recipes",{headers:t})},addComment:function(e,t,a){var s={Authorization:"Bearer ".concat(e)};return C.post("/recipes/".concat(t,"/comments"),a,{headers:s})},removeRecipe:function(e,t){var a={Authorization:"Bearer ".concat(e)};return C.delete("/recipes/".concat(t),{headers:a})},removeComment:function(e,t,a){var s={Authorization:"Bearer ".concat(e)};return C.delete("/recipes/".concat(t,"/comments/").concat(a),{headers:s})},uploadNewRecipe:function(e,t){var a={Authorization:"Bearer ".concat(e)};return C.post("/recipes/",t,{headers:a})},signUp:function(e){return C.post("/auth/signup/",e)},logIn:function(e){return C.post("/auth/login/",e)},authorize:function(e){var t={Authorization:"Bearer ".concat(e)};return C.get("/",{headers:t})}},w=h.a.object({username:h.a.string().pattern(new RegExp("^[a-zA-Z0-9áéíóúýčďěňřšťžůÁÉÍÓÚÝČĎĚŇŘŠŤŽŮ ]*$")).min(3).max(30).required(),password:h.a.string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$"))}),k={name:"SignUp",data:function(){return{user:{username:"",password:""},errorMessage:""}},methods:{SignUp:function(){var e=this;this.isValid()&&_.signUp(this.user).then((function(t){localStorage.token=t.data.token,e.$router.push("/")})).catch((function(t){e.errorMessage=t.message}))},isValid:function(){var e=w.validate(this.user);return void 0===e.error||(e.error.message.includes("username")&&(this.errorMessage="Uživatelské jméno zadáno nesprávně"),e.error.message.includes("password")&&(this.errorMessage="Vaše heslo bylo zadáno nesprávně"),!1)}},watch:{user:{handler:function(){this.errorMessage=null},deep:!0}}},y=k,x=Object(c["a"])(y,p,f,!1,null,"2a4009e8",null),z=x.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("h1",[e._v("Přihlášení")]),a("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[e.errorMessage?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e(),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[e._v("Uživatelské jméno")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"tet",id:"username","aria-describedby":"usernameHelp",placeholder:"Zadejte uživatelské jméno",required:""},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[e._v("Heslo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Zadejte heslo",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Potvrdit")])])])},O=[],R=h.a.object({username:h.a.string().pattern(new RegExp("^[a-zA-Z0-9áéíóúýčďěňřšťžůÁÉÍÓÚÝČĎĚŇŘŠŤŽŮ ]*$")).min(3).max(30).required(),password:h.a.string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$"))}),S={name:"LogIn",data:function(){return{user:{username:"",password:""},errorMessage:""}},methods:{login:function(){var e=this;if(this.isValid()){var t={username:this.user.username,password:this.user.password};_.logIn(t).then((function(t){localStorage.token=t.data.token,e.$router.push("/")})).catch((function(t){e.errorMessage=t.message}))}},isValid:function(){var e=R.validate(this.user);return void 0===e.error||(e.error.message.includes("username")&&(this.errorMessage="uživatelské jméno zadáno nesprávně"),e.error.message.includes("password")&&(this.errorMessage="Vaše heslo bylo zadáno nesprávně"),!1)}},watch:{user:{handler:function(){this.errorMessage=null},deep:!0}}},$=S,P=Object(c["a"])($,I,O,!1,null,"f416f080",null),T=P.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("h1",[e._v("Recepty")]),a("h5",[e._v("helou "+e._s(e.user.username))]),a("form",{on:{submit:function(t){return t.preventDefault(),e.postRecipe(t)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[e._v("Název receptu:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.recipeToInsert.title,expression:"recipeToInsert.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"Zadejte název.."},domProps:{value:e.recipeToInsert.title},on:{input:function(t){t.target.composing||e.$set(e.recipeToInsert,"title",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"directions"}},[e._v("Postup:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.recipeToInsert.directions,expression:"recipeToInsert.directions"}],staticClass:"form-control",attrs:{id:"directions",rows:"3"},domProps:{value:e.recipeToInsert.directions},on:{input:function(t){t.target.composing||e.$set(e.recipeToInsert,"directions",t.target.value)}}})]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Uložit recept")])]),a("br"),e._l(e.recipes,(function(t){return a("div",{key:t._id,staticClass:"card text-white bg-primary mb-3",staticStyle:{"max-width":"20rem"}},[a("div",{staticClass:"card-body"},[a("h4",{staticClass:"card-title"},[e._v(e._s(t.title))]),a("p",{staticClass:"card-text"},[e._v(e._s(t.directions))])])])})),a("button",{staticClass:"btn btn-primary btn-lg",on:{click:e.logout}},[e._v("Odhlásit se")])],2)},A=[],E=(a("d3b7"),"http://localhost:5000/"),N={name:"Dashboard",data:function(){return{user:{},recipeToInsert:{title:"",directions:""},recipes:[]}},mounted:function(){var e=this;console.log('posílám request na "/"'),fetch(E,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.json()})).then((function(t){console.log("odpověď přišla v pohodě"),console.log(t),e.user=t.user,e.getRecipes()}))},methods:{logout:function(){localStorage.removeItem("token"),this.$router.push("/login")},getRecipes:function(){var e=this,t="".concat(E,"recipes");console.log("pokračuji GET requestem na /recipes/"),fetch(t,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return console.log("obdrželi jsme response"),e.json()})).then((function(t){console.log("tady si ji vypíšeme"),console.log(t),e.recipes=t}))},postRecipe:function(){var e=this,t="".concat(E,"recipes");fetch(t,{method:"POST",body:JSON.stringify(this.recipeToInsert),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.json()})).then((function(t){return e.recipes.push(t)}))}}},F=N,U=Object(c["a"])(F,M,A,!1,null,"3877e6a4",null),D=U.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-container"},[a("NewRecipe",{staticClass:"box",on:{addRecipe:function(t){return e.recipes.unshift(t)}}}),e._l(e.recipes,(function(t){return a("recipe",{key:t.dateTime,staticClass:"box",attrs:{recipe:t,openForComments:e.openForComments,userAvatar:e.userAvatar,recipes:e.recipes},on:{clickComment:function(t){return e.openComments(t)},newCommentAdded:function(t){return e.socket.emit("newCommentAdded",t)},recipeRemoved:function(t){return e.removeRecipe(t)}}})}))],2)},L=[],Z=(a("4de4"),a("3835")),H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"crd-header"},[e.active?a("h3",{staticClass:"food-title"},[e._v(e._s(e.name))]):e._e()]),a("div",{staticClass:"px-3"},[e.active?e._e():a("form",{staticClass:"form-inline",on:{submit:function(t){t.preventDefault(),e.active=!0}}},[a("h5",{staticClass:"pb-2"},[e._v("Přidání nového receptu:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control col-md-11",attrs:{type:"text",id:"recipeName","aria-describedby":"Název receptu",placeholder:"Zadejte název receptu",autocomplete:"off"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),a("button",{staticClass:"btn btn-primary col-md-1",attrs:{type:"submit"}},[e._v(" OK ")])])])]),a("div",{staticClass:"image-upload"},[a("label",{attrs:{for:"recipeImageFile"}},[a("PhotoHolder",{class:["food-image",{"food-image-active":e.active}],attrs:{photo:this.previewImage}})],1),a("input",{staticClass:"form-control-file",attrs:{type:"file",id:"recipeImageFile"},on:{change:e.fileSelected}})]),e.active?a("div",{staticClass:"crd-footer"},[a("authorCard"),e._m(0),a("button",{staticClass:"btn btn-primary h-75",attrs:{type:"submit"},on:{click:e.uploadToServer}},[e._v(" Vložit ")])],1):e._e()])},B=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex align-items-center"},[a("p",{staticClass:"mr-2 h4 m-0"},[e._v("Kategorie:")]),a("select",{staticClass:"form-control form-control-lg"},[a("option",[e._v("Hlavní jídlo")]),a("option",[e._v("Moučník")]),a("option",[e._v("Polévka")])])])}],V=(a("b0c0"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"autor-container "},[s("img",{staticClass:"profile-photo",attrs:{src:a("9462"),alt:""}}),e._m(0)])}),J=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-box"},[a("p",{staticClass:"author-name"},[e._v("Jaňula Denková")]),a("small",{staticClass:"posted-date"},[e._v("Právě teď")])])}],K={name:"Author",data:function(){return{}}},G=K,Q=(a("8b39"),Object(c["a"])(G,V,J,!1,null,"79dac30e",null)),W=Q.exports,X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"background"},[e.photo?s("div",[s("img",{attrs:{src:e.photo,alt:""}})]):s("div",[s("img",{staticClass:"icon",attrs:{src:a("0b86")}}),s("h1",[e._v("Obrázek vyberte zde")])])])},Y=[],ee={name:"PhotoHolder",data:function(){return{}},props:["photo"]},te=ee,ae=(a("a8b8"),Object(c["a"])(te,X,Y,!1,null,"6f24f2be",null)),se=ae.exports,ne={name:"NewRecipe",components:{AuthorCard:W,PhotoHolder:se},data:function(){return{active:!1,name:"",imageFile:null,previewImage:void 0,reader:void 0}},created:function(){var e=this;this.reader=new FileReader,this.reader.onload=function(t){e.previewImage=t.target.result}},computed:{imageUrl:function(){var e=a("8f4a");return this.previewImage?this.previewImage:e}},methods:{fileSelected:function(e){var t=Object(Z["a"])(e.target.files,1);this.imageFile=t[0],this.reader.readAsDataURL(this.imageFile)},uploadToServer:function(){var e=this,t=new FormData;t.append("recipeImage",this.imageFile,this.imageFile.name),t.append("title",this.name),_.uploadNewRecipe(localStorage.token,t).then((function(t){var a=t.data;e.$emit("addRecipe",a),e.active=!1,e.name="",e.file=null,e.previewImage=null})).catch((function(e){console.log(e)}))}}},re=ne,oe=(a("e8a8"),Object(c["a"])(re,H,B,!1,null,"0bdb2bdd",null)),ie=oe.exports,ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"tratra"}},[s("div",{staticClass:"position-relative"},[e.showModal?s("div",{staticClass:"mdl1"},[s("div",{staticClass:"square"}),s("ul",[s("li",[s("button",{staticClass:"acc_ctrl",on:{click:function(t){e.showConfirm=!e.showConfirm}}},[s("img",{attrs:{src:a("c637"),alt:"trash"}}),s("p",[e._v("Vymazat recept")])]),s("hr"),s("transition",{attrs:{name:"slide"}},[e.showConfirm?s("div",{staticClass:"text-center"},[s("p",{staticClass:" py-2"},[e._v("Opravdu chcete recept vymazat?")]),s("div",{staticClass:"d-flex justify-content-center pb-1"},[s("button",{staticClass:"c-btn remove-revert",on:{click:function(t){e.showConfirm=!1}}},[e._v(" Ne ")]),s("button",{staticClass:"c-btn remove-submit",on:{click:function(t){e.showConfirm=e.removeRecipe(e.recipe._id)}}},[e._v(" Ano ")])]),s("hr")]):e._e()])],1),s("li",{staticClass:"d-flex"},[s("button",{staticClass:"acc_ctrl"},[s("img",{attrs:{src:a("c4cc"),alt:"pen"}}),s("p",[e._v("Upravit recept")])])])])]):e._e(),s("div",{staticClass:"crd-header"},[s("h3",{staticClass:"food-title"},[e._v(e._s(e.recipe.title))]),s("button",{staticClass:"menu",on:{click:function(t){e.showModal=!e.showModal}}},[s("img",{attrs:{src:a("36be"),alt:"menu"}})])]),s("img",{staticClass:"food-image",attrs:{src:""+e.staticURL+e.recipe.image,alt:"recipeImage"}}),s("div",{staticClass:"crd-footer"},[s("div",{staticClass:"autor-container w33"},[s("img",{staticClass:"profile-photo",attrs:{src:a("a045")("./"+e.recipe.author.avatar_img),alt:""}}),s("div",{staticClass:"text-box"},[s("p",{staticClass:"author-name"},[e._v(e._s(e.recipe.author.username))]),s("small",{staticClass:"posted-date"},[e._v(e._s(e._f("moment")(e.recipe.dateTime,"LLL")))])])]),s("div",{staticClass:"w33 text-center"},[s("p",{staticClass:"ft-1"},[e._v("Kategorie:")]),s("p",{staticClass:"ft-2"},[e._v("Hlavní jídlo")])]),s("div",{staticClass:"w33 text-right"},[s("p",{staticClass:"ft-1"},[e._v("Doba přípravy:")]),s("p",{staticClass:"ft-2"},[e._v("90min")])])]),e.recipe.comments.length>0?s("hr"):e._e(),e.openForComments===e.recipe._id?s("div",{staticClass:"comment-box"},[e._l(e.recipe.comments,(function(t){return s("comment",{key:t.dateTime,attrs:{comment:t,recipe:e.recipe}})})),s("hr"),s("div",{staticClass:"add-comment-box"},[s("img",{staticClass:"add-comment-avatar",attrs:{src:e.userAvatar,alt:"userAvatar"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.commentInput,expression:"commentInput"}],staticClass:"add-comment-input",attrs:{type:"text",placeholder:"Přidejte komentář..."},domProps:{value:e.commentInput},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addComment(e.recipe._id)},input:function(t){t.target.composing||(e.commentInput=t.target.value)}}}),s("button",{staticClass:"btn btn-primary ml-auto",attrs:{type:"submit",disabled:""===e.commentInput},on:{click:function(t){return e.addComment(e.recipe._id)}}},[e._v(" Zveřejnit ")])]),s("hr")],2):e._e(),s("div",{staticClass:"crd-footer-2"},[s("a",[e._v("Libí se mi")]),s("a",{on:{click:function(t){return e.$emit("clickComment",e.recipe._id)}}},[e._v("Komentovat")]),s("a",[e._v("Přidat do mých receptů")])])])])},le=[],ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-row"},[a("img",{staticClass:"avatar",attrs:{src:e.imgPath,alt:this.comment.author.avatar_img}}),a("div",{staticClass:"pl-2 buble"},[a("div",{staticClass:"d-flex"},[a("h5",{staticClass:"author-name"},[e._v(e._s(e.comment.author.username))]),a("p",{staticClass:"date-time"},[e._v("- "+e._s(e._f("moment")(e.comment.dateTime,"calendar"))+":")]),a("i",{staticClass:"close-icon",on:{click:function(t){return e.removeComment(e.comment._id)}}},[a("closeIcon",{attrs:{size:12,fillColor:"#777"}})],1)]),a("p",{staticClass:"comment"},[e._v(e._s(e.comment.comment))])])])},me=[],de=a("7eb5"),pe={name:"Comment",data:function(){return{}},components:{CloseIcon:de["a"]},props:["comment","recipe"],computed:{imgPath:function(){return a("a045")("./".concat(this.comment.author.avatar_img))}},methods:{removeComment:function(e){var t=this,a=this.recipe._id;console.log("Mažu komentář s ID: ".concat(e,", náležící receptu ").concat(this.recipe._id)),_.removeComment(localStorage.token,a,e).then((function(){t.recipe.comments=t.recipe.comments.filter((function(t){return t._id!==e}))})).catch((function(e){return alert(e)}))}}},fe=pe,ve=(a("c51c"),Object(c["a"])(fe,ue,me,!1,null,"2b243047",null)),he=ve.exports,be={name:"Recipe",components:{Comment:he},props:["recipe","openForComments","userAvatar","recipes"],data:function(){return{commentInput:"",showModal:!1,showConfirm:!1,staticURL:"".concat("https://moje-recepty-online.herokuapp.com","/images/")}},methods:{addComment:function(e){var t=this,a={comment:this.commentInput};_.addComment(localStorage.token,e,a).then((function(a){var s=a.data,n=t.recipes.filter((function(t){return t._id===e})),r=Object(Z["a"])(n,1),o=r[0];o.comments.push(s);var i={recipeId:o._id,comment:s};t.$emit("newCommentAdded",i),t.commentInput=""}))},removeRecipe:function(e){var t=this;this.showConfirm=!1,setTimeout((function(){t.showModal=!1,setTimeout((function(){_.removeRecipe(localStorage.token,e).then(t.$emit("recipeRemoved",e))}),50),console.log("mažu recept ".concat(e))}),250)}}},ge=be,je=(a("90d1"),Object(c["a"])(ge,ce,le,!1,null,"adfaf52c",null)),Ce=je.exports,_e=a("8055"),we=a.n(_e),ke="https://moje-recepty-online.herokuapp.com",ye={name:"Feed",components:{NewRecipe:ie,Recipe:Ce},data:function(){return{socket:{},user:{},recipeToInsert:{title:"",directions:""},recipes:[],openForComments:null}},computed:{userAvatar:function(){return a("9462")}},mounted:function(){var e=this;this.socket=we()(ke),this.socket.on("newComment",(function(t){var a=t.recipeId,s=t.comment;console.log("createt start");var n=e.recipes.filter((function(e){return e._id===a})),r=Object(Z["a"])(n,1),o=r[0];o.comments.push(s),console.log(e.recipes[0].comments),console.log("created end")})),console.log('posílám request na "/"'),_.authorize(localStorage.token).then((function(t){t.data.user&&(e.user=t.data.user,e.getRecipes())})).catch((function(t){alert(t.response.data.message),e.logout()}))},methods:{logout:function(){localStorage.removeItem("token"),this.$router.push("/login")},getRecipes:function(){var e=this;_.getRecipes(localStorage.token).then((function(t){e.recipes=t.data})).catch((function(e){console.log("There was an error:",e.response)}))},openComments:function(e){this.openForComments!==e?this.openForComments=e:this.openForComments=""},removeRecipe:function(e){this.recipes=this.recipes.filter((function(t){return t._id!==e}))}}},xe=ye,ze=(a("d01b"),Object(c["a"])(xe,q,L,!1,null,"5306315c",null)),Ie=ze.exports;function Oe(e,t,a){localStorage.token?a("/"):a()}s["a"].use(d["a"]);var Re=[{path:"/",name:"Feed",component:Ie,beforeEnter:function(e,t,a){localStorage.token?a():a("/login")}},{path:"/signup",name:"SignUp",component:z,beforeEnter:Oe},{path:"/login",name:"LogIn",component:T,beforeEnter:Oe},{path:"/dashboard",name:"Dashboard",component:D,beforeEnter:function(e,t,a){localStorage.token?a():a("/login")}}],Se=new d["a"]({routes:Re}),$e=Se;r.a.locale("cs"),s["a"].config.productionTip=!1,s["a"].use(a("2ead"),{moment:r.a}),new s["a"]({router:$e,render:function(e){return e(m)}}).$mount("#app")},"85ec":function(e,t,a){},"8b39":function(e,t,a){"use strict";var s=a("cd0a"),n=a.n(s);n.a},"8f4a":function(e,t,a){e.exports=a.p+"img/image-placeholder.cd117032.jpg"},"90d1":function(e,t,a){"use strict";var s=a("edee"),n=a.n(s);n.a},9462:function(e,t,a){e.exports=a.p+"img/janula.08b266ca.jpg"},a045:function(e,t,a){var s={"./brona.jpg":"e763","./janula.jpg":"9462","./monicka.jpg":"a0d2"};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id="a045"},a0d2:function(e,t,a){e.exports=a.p+"img/monicka.61a8e9d3.jpg"},a713:function(e,t,a){},a802:function(e,t,a){},a8b8:function(e,t,a){"use strict";var s=a("a713"),n=a.n(s);n.a},ab2a:function(e,t,a){},c4cc:function(e,t,a){e.exports=a.p+"img/pen.552fcd66.svg"},c51c:function(e,t,a){"use strict";var s=a("48b2"),n=a.n(s);n.a},c637:function(e,t,a){e.exports=a.p+"img/trash.d959d570.svg"},cd0a:function(e,t,a){},d01b:function(e,t,a){"use strict";var s=a("ab2a"),n=a.n(s);n.a},e763:function(e,t,a){e.exports=a.p+"img/brona.e16313c1.jpg"},e8a8:function(e,t,a){"use strict";var s=a("a802"),n=a.n(s);n.a},edee:function(e,t,a){}});
//# sourceMappingURL=app.886ea1d7.js.map